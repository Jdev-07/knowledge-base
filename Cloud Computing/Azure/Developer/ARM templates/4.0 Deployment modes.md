
When deploying your resources, you specify that the deployment is either an incremental update or a complete update. The difference between these two modes is how Resource Manager handles existing resources in the resource group that aren't in the template.

For both modes, Resource Manager tries to create all resources specified in the template. If the resource already exists in the resource group and its settings are unchanged, no operation is taken for that resource. If you change the property values for a resource, the resource is updated with those new values. If you try to update the location or type of an existing resource, the deployment fails with an error. Instead, deploy a new resource with the location or type that you need.

## Incremental mode

In incremental mode, Resource ManagerÂ **leaves unchanged**Â resources that exist in the resource group but aren't specified in the template. Resources in the templateÂ **are added**Â to the resource group.

**Important ğŸ’¡**

Incremental mode is the recommended deployment mode. If there is a need to delete resources as part of a Bicep file or ARM JSON template, useÂ [deployment stacks](https://learn.microsoft.com/en-us/azure/azure-resource-manager/bicep/deployment-stacks).

When redeploying an existing resource in incremental mode, all properties are reapplied. TheÂ **properties aren't incrementally added**. A common misunderstanding is to think properties that aren't specified in the template are left unchanged. If you don't specify certain properties, Resource Manager interprets the deployment as overwriting those values. Properties that aren't included in the template are reset to the default values. Specify all non-default values for the resource, not just the ones you're updating. The resource definition in the template always contains the final state of the resource. It can't represent a partial update to an existing resource.

**Warning âš ï¸**

In rare cases, you can specify properties either on a resource or on one of its child resources. Two common examples areÂ **subnets on virtual networks**Â andÂ **site configuration values for web apps**. In these cases, you must handle incremental updates carefully.

For subnets, specify the values through theÂ `subnets`Â property on theÂ [Microsoft.Network/virtualNetworks](https://learn.microsoft.com/en-us/azure/templates/microsoft.network/virtualnetworks)Â resource. Don't define the values through the child resourceÂ [Microsoft.Network/virtualNetworks/subnets](https://learn.microsoft.com/en-us/azure/templates/microsoft.network/virtualnetworks/subnets). As long as the subnets are defined on the virtual network, you can redeploy the virtual network and not lose the subnets.

For site configuration values, the values are implemented in the child resource typeÂ `Microsoft.Web/sites/config`. If you redeploy the web app and specify an empty object for the site configuration values, the child resource isn't updated. However, if you provide new site configuration values, the child resource type is updated.

## Complete Mode

In complete mode, Resource ManagerÂ **deletes**Â resources that exist in the resource group but aren't specified in the template.

**Note**: Always use theÂ [what-if operation](https://learn.microsoft.com/en-us/azure/azure-resource-manager/templates/deploy-what-if)Â before deploying a template in complete mode. What-if shows you which resources will be created, deleted, or modified. Use what-if to avoid unintentionally deleting resources.

If your template includes a resource that isn't deployed becauseÂ [condition](https://learn.microsoft.com/en-us/azure/azure-resource-manager/templates/conditional-resource-deployment)Â evaluates to false, the result depends on which REST API version you use to deploy the template. If you use a version earlier than 2019-05-10, the resourceÂ **isn't deleted**. With 2019-05-10 or later, the resourceÂ **is deleted**. The latest versions of Azure PowerShell and Azure CLI delete the resource.

Be careful using complete mode withÂ [copy loops](https://learn.microsoft.com/en-us/azure/azure-resource-manager/templates/copy-resources). Any resources that aren't specified in the template after resolving the copy loop are deleted.

If you deploy toÂ [more than one resource group in a template](https://learn.microsoft.com/en-us/azure/azure-resource-manager/templates/deploy-to-resource-group), resources in the resource group specified in the deployment operation are eligible to be deleted. Resources in the secondary resource groups aren't deleted.

There are some differences in how resource types handle complete mode deletions. Parent resources are automatically deleted when not in a template that's deployed in complete mode. Some child resources aren't automatically deleted when not in the template. However, these child resources are deleted if the parent resource is deleted.

For example, if your resource group contains a DNS zone (`Microsoft.Network/dnsZones`Â resource type) and a CNAME record (`Microsoft.Network/dnsZones/CNAME`Â resource type), the DNS zone is the parent resource for the CNAME record. If you deploy with complete mode and don't include the DNS zone in your template, the DNS zone and the CNAME record are both deleted. If you include the DNS zone in your template but don't include the CNAME record, the CNAME isn't deleted.

For a list of how resource types handle deletion, seeÂ [Deletion of Azure resources for complete mode deployments](https://learn.microsoft.com/en-us/azure/azure-resource-manager/templates/deployment-complete-mode-deletion).

If the resource group isÂ [locked](https://learn.microsoft.com/en-us/azure/azure-resource-manager/management/lock-resources), complete mode doesn't delete the resources.

### Set to deployment mode

**PowerShell**

```BASH
New-AzResourceGroupDeployment -Mode Complete -Name ExampleDeployment -ResourceGroupName ExampleResourceGroup -TemplateFile c:\MyTemplates\storage.json
```

**CLI**

```SHELL
az deployment group create --mode Complete --name ExampleDeployment --resource-group ExampleResourceGroup --template-file storage.json
```